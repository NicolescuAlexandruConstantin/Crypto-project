<div class="tab-card">
  <h2>Roulette Game ğŸ°</h2>
  
  <div class="roulette-container">
    <!-- Roulette Wheel -->
    <div class="wheel-section">
      <div class="roulette-wheel">
        <div class="wheel-background" [style.transform]="'rotate(' + (state.currentNumber * (360 / slots)) + 'deg)'"></div>
        <div class="wheel-inner" [style.transform]="'rotate(' + (state.currentNumber * (360 / slots)) + 'deg)'">
          <!-- Triangle segments with borders -->
          <div *ngFor="let i of getNumbers()" class="triangle-segment" [style.transform]="'rotate(' + (i * (360 / slots)) + 'deg)'">
          </div>
          
          <!-- Numbers -->
          <div *ngFor="let i of getNumbers()" 
               class="wheel-number"
               [ngClass]="{ 'selected': state.selectedNumber === i }"
               (click)="!state.isSpinning && selectNumber(i)"
               [style.transform]="'rotate(' + (i * (360 / slots)) + 'deg) translateY(-145px) rotate(-' + (i * (360 / slots)) + 'deg)'">
            {{ i }}
          </div>
        </div>
        <div class="wheel-pointer"></div>
      </div>
      <p class="selected-number" *ngIf="state.selectedNumber !== null">
        âœ“ Selected: <strong>{{ state.selectedNumber }}</strong>
      </p>
      <p class="select-hint" *ngIf="state.selectedNumber === null">
        ğŸ‘† Click a number to select
      </p>
    </div>

    <!-- Controls Section -->
    <div class="controls-section">
      <div class="control-group">
        <h3>Game Controls</h3>
        
        <div class="input-group">
          <label>Balance</label>
          <div class="balance-display">ğŸ’° ${{ state.balance }}</div>
        </div>

        <div class="input-group">
          <label for="bet-input">Bet Amount</label>
          <input
            type="number"
            id="bet-input"
            [(ngModel)]="state.bet"
            min="1"
            [max]="state.balance"
            [disabled]="state.isSpinning"
          />
        </div>

        <div class="input-group">
          <label>Selected Number</label>
          <div class="selected-display" [ngClass]="{ 'has-selection': state.selectedNumber !== null }">
            {{ state.selectedNumber !== null ? state.selectedNumber : 'None' }}
          </div>
        </div>

        <button
          class="btn btn-primary spin-button"
          (click)="spinRoulette()"
          [disabled]="state.isSpinning || state.balance <= 0 || state.selectedNumber === null"
        >
          {{ state.isSpinning ? 'ğŸ”„ Spinning...' : 'ğŸ¯ SPIN!' }}
        </button>

        <button
          class="btn btn-secondary reset-button"
          (click)="resetGame()"
          [disabled]="state.isSpinning"
        >
          ğŸ’« Reset Game
        </button>
      </div>

      <!-- BBS Parameters -->
      <div class="control-group">
        <h3>Blum Blum Shub Parameters</h3>
        
        <div class="input-group">
          <label for="p-input">P (Prime)</label>
          <input
            type="number"
            id="p-input"
            [(ngModel)]="p"
            [disabled]="state.isSpinning"
          />
        </div>

        <div class="input-group">
          <label for="q-input">Q (Prime)</label>
          <input
            type="number"
            id="q-input"
            [(ngModel)]="q"
            [disabled]="state.isSpinning"
          />
        </div>

        <div class="input-group">
          <label for="seed-input">Seed</label>
          <input
            type="number"
            id="seed-input"
            [(ngModel)]="seed"
            [disabled]="state.isSpinning"
          />
        </div>

        <button
          class="btn btn-secondary"
          (click)="changeSeed()"
          [disabled]="state.isSpinning"
        >
          ğŸ”€ Random Seed
        </button>
      </div>

      <!-- Message Display -->
      <div class="message" [ngClass]="'message-' + messageType" *ngIf="message">
        {{ message }}
      </div>

      <!-- Result Display -->
      <div class="result-display" *ngIf="state.result !== null">
        <h4>Last Result</h4>
        <div class="result-number">{{ state.result }}</div>
        <div class="result-match" [ngClass]="{ 'win': state.selectedNumber === state.result, 'lose': state.selectedNumber !== state.result }">
          {{ state.selectedNumber === state.result ? 'âœ“ MATCH!' : 'âœ— No Match' }}
        </div>
      </div>
    </div>
  </div>

  <!-- Game Rules -->
  <div class="rules-section">
    <h3>Game Rules</h3>
    <ul>
      <li>ğŸ² Click on a number (0-35) to select your bet</li>
      <li>ğŸ’° Set your bet amount (you win 36x your bet if correct)</li>
      <li>ğŸ” Numbers generated using Blum Blum Shub cryptographic generator</li>
      <li>ğŸ“Š Adjust P, Q, and Seed for different random sequences</li>
      <li>ğŸ¯ Win by correctly guessing the spinning number</li>
      <li>ğŸ‰ Game ends when balance reaches $0</li>
    </ul>
  </div>
</div>
